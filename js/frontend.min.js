const wolfgdprAjaxUrl=wolfJSData.ajax_url;function wolfGdprStartCookies(){active_categories=wwpGetCookie(wolfJSData.cookie_consent);let e=document.querySelector(".comment-form-cookies-consent");null!==e&&e.remove(),""!=active_categories||(wolfGdpr_forms_consent(),wwpToggleClass(".wolf-consentment-bar","hidden"))}function wolfGdpr_forms_consent(){if(wolfJSData.theme_wolfwp_active){html="",html+='<label class="wolf-gdpr-field-consent">',html+='<input type="checkbox" name="wolf-gdrp-consent" required="">',html+='<span class="checkmark"><i class="fas fa-check" aria-hidden="true"></i></span>',html+="<span>",html+=wolfJSData.wolfgdpr_checkbox_capture_text,html+="</span>",html+="</label>";let e=document.querySelectorAll(".form-data.-capture .obs");e.forEach(e=>{e.innerHTML=html})}html='<label class="wolf-gdpr-field-consent">',html+='<input type="checkbox" name="wolf-gdrp-consent-comment" value="1" required="">',html+='<span class="checkmark"><i class="fas fa-check" aria-hidden="true"></i></span>',html+="<span>",html+=wolfJSData.wolfgdpr_checkbox_comment_text,html+="</span>",html+="</label>",wwpBefore(null,document.querySelector("#commentform .form-submit"),["p",html])}function wolf_sendUserRequest(t){wolf_hideMessage(t);var e=t.querySelector("input[name='wolf-action']").value,o=t.querySelector("input[name='name']").value,a=t.querySelector("input[name='wolf-email']"),n=t.querySelector("input[name='wolf-form-consent']"),l=t.querySelector("input[name='_wpnonce']").value,r=t.querySelector("button[type='submit']"),s=t.querySelector("button[type='submit']").textContent;wwpValidateEmail(a.value)?!0===n.checked?(r.setAttribute("disabled",!0),r.innerHTML=wolfJSData.msg_wait,e={action:"wfgr_create_data_solicitation_ajax","wolf-action":e,name:o,"wolf-email":a.value,"wolf-form-consent":n.value,_wpnonce:l},fetch(wolfgdprAjaxUrl,wolf_ajax_get_config(e)).then(function(e){return e.json()}).then(function(e){e.success?(wolf_ShowMessage(e.data.message,"success",t),a.value="",n.checked=!1):wolf_ShowMessage(e.data.message,"error",t),r.disabled=!1,r.innerHTML=s}).catch(function(e){console.log("Wolf Privacidade - Erro: ",e)})):wolf_ShowMessage(wolfJSData.msg_email_authorize,"error",t):wolf_ShowMessage(wolfJSData.msg_email_invalid,"error",t)}function wolf_sendUserRectify(t){wolf_hideMessage(t);var e=t.querySelector("input[name='wolf-action']").value,o=t.querySelector("input[name='name']").value,a=t.querySelector("input[name='wolf-email']"),n=t.querySelector("textarea[name='wolf-current']"),l=t.querySelector("textarea[name='wolf-rectified']"),r=t.querySelector("input[name='wolf-form-consent']"),s=t.querySelector("input[name='_wpnonce']").value,c=t.querySelector("button[type='submit']"),i=t.querySelector("button[type='submit']").textContent;wwpValidateEmail(a.value)?!0===r.checked?(c.setAttribute("disabled",!0),c.innerHTML=wolfJSData.msg_wait,e={action:"wfgr_create_data_rectification_ajax","wolf-action":e,name:o,"wolf-email":a.value,"wolf-current":n.value,"wolf-rectified":l.value,"wolf-form-consent":r.value,_wpnonce:s},fetch(wolfgdprAjaxUrl,wolf_ajax_get_config(e)).then(function(e){return e.json()}).then(function(e){e.success?(wolf_ShowMessage(e.data.message,"success",t),a.value="",n.value="",l.value="",r.checked=!1):wolf_ShowMessage(e.data.message,"error",t),c.disabled=!1,c.innerHTML=i}).catch(function(e){console.log("Wolf Privacidade - Erro: ",e)})):wolf_ShowMessage(wolfJSData.msg_email_authorize,"error",t):wolf_ShowMessage(wolfJSData.msg_email_invalid,"error",t)}function wolf_sendUserUnsubscribe(t){wolf_hideMessage(t);var e=t.querySelector("input[name='wolf-action']").value,o=t.querySelector("input[name='name']").value,a=t.querySelector("input[name='wolf-email']"),n=t.querySelector("input[name='wolf-form-consent']"),l=t.querySelector("input[name='_wpnonce']").value,r=t.querySelector("button[type='submit']"),s=t.querySelector("button[type='submit']").textContent;wwpValidateEmail(a.value)?!0===n.checked?(r.setAttribute("disabled",!0),r.innerHTML=wolfJSData.msg_wait,e={action:"wfgr_create_data_unsubscribe_ajax","wolf-action":e,name:o,"wolf-email":a.value,"wolf-form-consent":n.value,_wpnonce:l},fetch(wolfgdprAjaxUrl,wolf_ajax_get_config(e)).then(function(e){return e.json()}).then(function(e){e.success?(wolf_ShowMessage(e.data.message,"success",t),a.value="",n.checked=!1):wolf_ShowMessage(e.data.message,"error",t),r.disabled=!1,r.innerHTML=s}).catch(function(e){console.log("Wolf Privacidade - Erro: ",e)})):wolf_ShowMessage(wolfJSData.msg_email_authorize,"error",t):wolf_ShowMessage(wolfJSData.msg_email_invalid,"error",t)}function wolf_ShowMessage(e,t,o){let a=o.querySelector(".wolf-alert");a.querySelector(".wolf-alert-content").innerHTML=e,"error"==t?(a.classList.remove("success"),a.classList.add("error")):"success"==t&&(a.classList.remove("error"),a.classList.add("success")),wwpShow(a)}function wolf_hideMessage(e){let t=e.querySelector(".wolf-alert");t.querySelector(".wolf-alert-content").innerHTML="",t.classList.remove("error"),t.classList.remove("success"),t.style.display="none"}function wolf_ajax_get_config(e){return{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:wolf_get_params_ajax(e)}}function wolf_get_params_ajax(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}document.addEventListener("DOMContentLoaded",function(){wolfGdprStartCookies();var e=document.getElementById("wolf-form-export-data"),e=(null!==e&&e.addEventListener("submit",function(e){wolf_sendUserRequest(this),e.preventDefault()}),document.getElementById("wolf-form-remove-data")),e=(null!==e&&e.addEventListener("submit",function(e){wolf_sendUserRequest(this),e.preventDefault()}),document.getElementById("wolf-form-rectify-data")),e=(null!==e&&e.addEventListener("submit",function(e){wolf_sendUserRectify(this),e.preventDefault()}),document.getElementById("wolf-form-unsubscribe-data"));null!==e&&e.addEventListener("submit",function(e){wolf_sendUserUnsubscribe(this),e.preventDefault()})});